{% comment %} List out individual posts related to the project of the current page {% endcomment %}



{% comment %}
    IMPORTANT: ONLY render html if at least ONE valid entry exists! 

    if series_titles.size >= 1 and series_first_url.size >= 1
    
    Not happy with the solution below for efficiency, but it should work nicely
    Specifically, I am not keen on the idea of looping through all the posts
    twice: 1. To see if any posts exist with a matching project
           2. To do the actual work
    
{% endcomment %}

{% if page.show_project_posts %}
<br/>
<div class="panel related_posts">
    <h2 class="related_title">Related Posts</h2>
    <ul class="post_list">
    {% for post in site.posts %}

        {% if post.series == false or 
            post.project == nil or
            post.project != page.project
        %} {% continue %} {% endif %}

        {% if post.project == page.project %}
        <li><a href="{{ post.url }}">{{ post.title }}</a></li>
        {% endif %}
    {% endfor %}
    </ul>
</div>
{% endif %}